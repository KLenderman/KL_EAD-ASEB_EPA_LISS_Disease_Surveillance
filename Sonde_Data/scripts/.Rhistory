# melt is akin to pivot_longer, but I like that its called melt so I prefer it
melt(Master_Table, id.vars = c(`Date Time`, "Site"),
measure.vars = c("Actual Conductivity", "Salinity"))
# melt is akin to pivot_longer, but I like that its called melt so I prefer it
melt(Master_Table, id.vars = c("Date Time", "Site"),
measure.vars = c("Actual Conductivity", "Salinity"))
# melt is akin to pivot_longer, but I like that its called melt so I prefer it
melt(Master_Table, id.vars = c("Date Time", "Site"),
measure.vars = ~.)
# melt is akin to pivot_longer, but I like that its called melt so I prefer it
melt(Master_Table, id.vars = c("Date Time", "Site"),
measure.vars = .)
Master_Table
Master_Table
# melt is akin to pivot_longer, but I like that its called melt so I prefer it
Master_Table %>%
dplyr::select(-c("External Voltage", "Battery Capacity", "Barometric Pressure", "Date")) %>%
reshape2::melt(id.vars = c("Date Time", "Site"),
measure.vars = c("Actual Conductivity", "Salinity". "Total Dissolved Solids" ,"RDO Concentration"))
# melt is akin to pivot_longer, but I like that its called melt so I prefer it
Master_Table %>%
dplyr::select(-c("External Voltage", "Battery Capacity", "Barometric Pressure", "Date")) %>%
melt(id.vars = c("Date Time", "Site"),
measure.vars = c("Actual Conductivity", "Salinity". "Total Dissolved Solids" ,"RDO Concentration"))
# melt is akin to pivot_longer, but I like that its called melt so I prefer it
Master_Table %>%
dplyr::select(-c("External Voltage", "Battery Capacity", "Barometric Pressure", "Date")) %>%
melt(id.vars = c("Date Time", "Site"),
measure.vars = c("Actual Conductivity", "Salinity", "Total Dissolved Solids" ,"RDO Concentration"))
Master_Table
# melt is akin to pivot_longer, but I like that its called melt so I prefer it
colnames(Master_Table)
# melt is akin to pivot_longer, but I like that its called melt so I prefer it
# Im melting Im melting
Master_Table_LONG <- Master_Table %>%
dplyr::select(-c("External Voltage", "Battery Capacity", "Barometric Pressure", "Date")) %>%
melt(id.vars = c("Date Time", "Site"),
measure.vars = c("Actual Conductivity", "Salinity", "Resistivity",
"Total Dissolved Solids" ,"RDO Concentration", "RDO Saturation",
"Oxygen Partial Pressure", "Chlorophyll-a Fluorescence", "pH", "pH mV",
"Temperature"))
Master_Table_LONG
ggplot(Master_Table_LONG,
aes(x=`Date Time`,
y=value,
fill=Site)) +
geom_point() +
theme_classic() +
facet_wrap(~variable)
ggplot(Master_Table_LONG,
aes(x=`Date Time`,
y=value,
fill=Site)) +
geom_point() +
theme_classic() +
facet_wrap(~variable, scales = "free_y")
Master_Table
Master_Table %>%
dplyr::select(-c("External Voltage", "Battery Capacity", "Barometric Pressure", "Date")) %>%
dplyr::mutate(hours = subtr(12,13,"Date Time"))
Master_Table %>%
dplyr::select(-c("External Voltage", "Battery Capacity", "Barometric Pressure", "Date")) %>%
dplyr::mutate(hours = subtr(12,13,`Date Time`))
Master_Table %>%
dplyr::select(-c("External Voltage", "Battery Capacity", "Barometric Pressure", "Date")) %>%
dplyr::mutate(hours = substr(12,13,`Date Time`))
substr(12,13,Master_Table$`Date Time`)
substr(Master_Table$`Date Time`,12,13)
Master_Table %>%
dplyr::select(-c("External Voltage", "Battery Capacity", "Barometric Pressure", "Date")) %>%
dplyr::mutate(hours = substr(`Date Time`,12,13))
Master_Table_LONG_means <- Master_Table %>%
dplyr::select(-c("External Voltage", "Battery Capacity", "Barometric Pressure", "Date")) %>%
dplyr::mutate(hours = substr(`Date Time`,12,13)) %>%
melt(id.vars = c("Date Time", "Site", "hours"),
measure.vars = c("Actual Conductivity", "Salinity", "Resistivity",
"Total Dissolved Solids" ,"RDO Concentration", "RDO Saturation",
"Oxygen Partial Pressure", "Chlorophyll-a Fluorescence", "pH", "pH mV",
"Temperature"))
Master_Table_LONG_means
Master_Table_LONG <- Master_Table %>%
dplyr::select(-c("External Voltage", "Battery Capacity", "Barometric Pressure", "Date")) %>%
dplyr::mutate(hours = substr(`Date Time`,12,13)) %>%
melt(id.vars = c("Date Time", "Site", "hours"),
measure.vars = c("Actual Conductivity", "Salinity", "Resistivity",
"Total Dissolved Solids" ,"RDO Concentration", "RDO Saturation",
"Oxygen Partial Pressure", "Chlorophyll-a Fluorescence", "pH", "pH mV",
"Temperature")) %>%
substr(Master_Table$`Date Time`,12,13)
Master_Table_LONG <- Master_Table %>%
dplyr::select(-c("External Voltage", "Battery Capacity", "Barometric Pressure", "Date")) %>%
dplyr::mutate(hours = substr(`Date Time`,12,13)) %>%
melt(id.vars = c("Date Time", "Site", "hours"),
measure.vars = c("Actual Conductivity", "Salinity", "Resistivity",
"Total Dissolved Solids" ,"RDO Concentration", "RDO Saturation",
"Oxygen Partial Pressure", "Chlorophyll-a Fluorescence", "pH", "pH mV",
"Temperature"))
Master_Table_LONG
Master_Table_LONG_means <- Master_Table %>%
dplyr::select(-c("External Voltage", "Battery Capacity", "Barometric Pressure", "Date")) %>%
dplyr::mutate(hours = substr(`Date Time`,12,13)) %>%
melt(id.vars = c("Date Time", "Site", "hours"),
measure.vars = c("Actual Conductivity", "Salinity", "Resistivity",
"Total Dissolved Solids" ,"RDO Concentration", "RDO Saturation",
"Oxygen Partial Pressure", "Chlorophyll-a Fluorescence", "pH", "pH mV",
"Temperature")) %>%
dplyr::group_by(c("Date Time", "Site", "hours", "variable")) %>%
summarise_each(funs(mean, sd, se=sd(.)/sqrt(n())), value)
Master_Table_LONG_means <- Master_Table %>%
dplyr::select(-c("External Voltage", "Battery Capacity", "Barometric Pressure", "Date")) %>%
dplyr::mutate(hours = substr(`Date Time`,12,13)) %>%
melt(id.vars = c("Date Time", "Site", "hours"),
measure.vars = c("Actual Conductivity", "Salinity", "Resistivity",
"Total Dissolved Solids" ,"RDO Concentration", "RDO Saturation",
"Oxygen Partial Pressure", "Chlorophyll-a Fluorescence", "pH", "pH mV",
"Temperature")) %>%
dplyr::group_by("Date Time", "Site", "hours", "variable") %>%
summarise_each(funs(mean, sd, se=sd(.)/sqrt(n())), value)
Master_Table_LONG_means
Master_Table_LONG_means <- Master_Table %>%
dplyr::select(-c("External Voltage", "Battery Capacity", "Barometric Pressure", "Date")) %>%
dplyr::mutate(hours = substr(`Date Time`,12,13)) %>%
melt(id.vars = c("Date Time", "Site", "hours"),
measure.vars = c("Actual Conductivity", "Salinity", "Resistivity",
"Total Dissolved Solids" ,"RDO Concentration", "RDO Saturation",
"Oxygen Partial Pressure", "Chlorophyll-a Fluorescence", "pH", "pH mV",
"Temperature")) %>%
dplyr::group_by(`Date Time`, Site, hours, variable) %>%
summarise_each(funs(mean, sd, se=sd(.)/sqrt(n())), value)
Master_Table_LONG_means
Master_Table %>%
dplyr::select(-c("External Voltage", "Battery Capacity", "Barometric Pressure", "Date")) %>%
dplyr::mutate(`Date Time` = substr(`Date Time`,1,13))
Master_Table %>%
dplyr::select(-c("External Voltage", "Battery Capacity", "Barometric Pressure", "Date")) %>%
dplyr::mutate(`Date Time` = as.factor(substr(`Date Time`,1,13))) %>% # remove minutes and seconds
melt(id.vars = c("Date Time", "Site", "hours"),
measure.vars = c("Actual Conductivity", "Salinity", "Resistivity",
"Total Dissolved Solids" ,"RDO Concentration", "RDO Saturation",
"Oxygen Partial Pressure", "Chlorophyll-a Fluorescence", "pH", "pH mV",
"Temperature")) %>%
dplyr::group_by(`Date Time`, Site, hours, variable) %>%
summarise_each(funs(mean, sd, se=sd(.)/sqrt(n())), value)
Master_Table %>%
dplyr::select(-c("External Voltage", "Battery Capacity", "Barometric Pressure", "Date")) %>%
dplyr::mutate(`Date Time` = as.factor(substr(`Date Time`,1,13))) %>% # remove minutes and seconds
melt(id.vars = c("Date Time", "Site"),
measure.vars = c("Actual Conductivity", "Salinity", "Resistivity",
"Total Dissolved Solids" ,"RDO Concentration", "RDO Saturation",
"Oxygen Partial Pressure", "Chlorophyll-a Fluorescence", "pH", "pH mV",
"Temperature")) %>%
dplyr::group_by(`Date Time`, Site, variable) %>%
summarise_each(funs(mean, sd, se=sd(.)/sqrt(n())), value)
Master_Table_LONG_means
Master_Table_LONG_means <- Master_Table %>%
dplyr::select(-c("External Voltage", "Battery Capacity", "Barometric Pressure", "Date")) %>%
dplyr::mutate(`Date Time` = as.factor(substr(`Date Time`,1,13))) %>% # remove minutes and seconds
melt(id.vars = c("Date Time", "Site"),
measure.vars = c("Actual Conductivity", "Salinity", "Resistivity",
"Total Dissolved Solids" ,"RDO Concentration", "RDO Saturation",
"Oxygen Partial Pressure", "Chlorophyll-a Fluorescence", "pH", "pH mV",
"Temperature")) %>%
dplyr::group_by(`Date Time`, Site, variable) %>%
summarise_each(funs(mean, sd, se=sd(.)/sqrt(n())), value) %>%
dplyr::mutate(`Date Time` = ymd_h(`Date Time`))
Master_Table_LONG_means
Master_Table_LONG_means %>%
ggplot(aes(x=`Date Time`,
y=mean, # the mean values
group=Site)) + # call the new mean
geom_line(aes(group = factor(Site), # lines for site
linetype = Site),
size = 0.5,
position=position_dodge(.4)) +
# scale_linetype_manual(values=c("solid", "dashed")) +
geom_point(aes(shape=Site,
fill=Site)) +
scale_shape_manual(values=c(21, 22, 24, 29)) +
scale_fill_manual(values=c("#CC79A7", "#D55E00", "#009E73", "#0072B2")) +
geom_errorbar(aes(ymin=(mean)-(se),
ymax=(mean)+(se)),
width=0,position=position_dodge(.4)) +
facet_wrap(~variable, scales = "free_y")
Master_Table_LONG_means %>%
ggplot(aes(x=`Date Time`,
y=mean, # the mean values
group=Site)) + # call the new mean
geom_line(aes(group = factor(Site), # lines for site
linetype = Site),
size = 0.5,
position=position_dodge(.4)) +
# scale_linetype_manual(values=c("solid", "dashed")) +
geom_point(aes(shape=Site,
fill=Site)) +
scale_shape_manual(values=c(21, 22, 24, 29)) +
scale_fill_manual(values=c("#CC79A7", "#D55E00", "#009E73", "#0072B2")) +
geom_errorbar(aes(ymin=(mean)-(se),
ymax=(mean)+(se)),
width=0,position=position_dodge(.4)) +
facet_wrap(~variable*Site, scales = "free_y")
unique(Master_Table_LONG_means$variable)
as.character(unique(Master_Table_LONG_means$variable))
list(as.character(unique(Master_Table_LONG_means$variable)))
as.data.frame(list(as.character(unique(Master_Table_LONG_means$variable))))
as.data.frame(list(as.character(unique(Master_Table_LONG_means$variable)))) %>% dplyr::rename(1 = dat)
as.data.frame(list(as.character(unique(Master_Table_LONG_means$variable)))) %>% dplyr::rename(1 = dat)
as.data.frame(list(as.character(unique(Master_Table_LONG_means$variable)))) %>% dplyr::rename(dat = 1)
vars <- as.data.frame(list(as.character(unique(Master_Table_LONG_means$variable)))) %>%
dplyr::rename(dat = 1)
# filter table for each variable
Table_by_var <- Master_Table_LONG_means %>%
dplyr::filter(variable %in% vars[1,])
# plot each
plot <- Table_by_var %>%
ggplot(aes(x=`Date Time`,
y=mean, # the mean values
group=Site)) + # call the new mean
geom_line(aes(group = factor(Site), # lines for site
linetype = Site),
size = 0.5,
position=position_dodge(.4)) +
# scale_linetype_manual(values=c("solid", "dashed")) +
geom_point(aes(shape=Site,
fill=Site)) +
scale_shape_manual(values=c(21, 22, 24, 29)) +
scale_fill_manual(values=c("#CC79A7", "#D55E00", "#009E73", "#0072B2")) +
geom_errorbar(aes(ymin=(mean)-(se),
ymax=(mean)+(se)),
width=0,position=position_dodge(.4)) +
facet_wrap(~Site, scales = "free_y")
plot
# plot each
plot <- Table_by_var %>%
ggplot(aes(x=`Date Time`,
y=mean, # the mean values
group=Site)) + # call the new mean
geom_line(aes(group = factor(Site), # lines for site
linetype = Site),
size = 0.2,
position=position_dodge(.4)) +
# scale_linetype_manual(values=c("solid", "dashed")) +
geom_point(aes(shape=Site,
fill=Site)) +
scale_shape_manual(values=c(21, 22, 24, 25)) +
scale_fill_manual(values=c("#CC79A7", "#D55E00", "#009E73", "#0072B2")) +
geom_errorbar(aes(ymin=(mean)-(se),
ymax=(mean)+(se)),
width=0,position=position_dodge(.4)) +
facet_wrap(~Site, scales = "free_y")
plot
# plot each
plot <- Table_by_var %>%
ggplot(aes(x=`Date Time`,
y=mean, # the mean values
group=Site)) + # call the new mean
geom_line(aes(group = factor(Site), # lines for site
linetype = Site),
size = 0.2,
position=position_dodge(.4)) +
# scale_linetype_manual(values=c("solid", "dashed")) +
geom_point(aes(shape=Site,
fill=Site)) +
scale_shape_manual(values=c(21, 22, 24, 25)) +
scale_fill_manual(values=c("#CC79A7", "#D55E00", "#009E73", "#0072B2")) +
geom_errorbar(aes(ymin=(mean)-(se),
ymax=(mean)+(se)),
width=0,position=position_dodge(.4)) +
facet_grid(rows = vars(Site))
plot
# plot each
plot <- Table_by_var %>%
ggplot(aes(x=`Date Time`,
y=mean, # the mean values
group=Site)) + # call the new mean
geom_line(aes(group = factor(Site), # lines for site
linetype = Site),
size = 0.2,
position=position_dodge(.4)) +
# scale_linetype_manual(values=c("solid", "dashed")) +
geom_point(aes(shape=Site,
fill=Site)) +
scale_shape_manual(values=c(21, 22, 24, 25)) +
scale_fill_manual(values=c("#CC79A7", "#D55E00", "#009E73", "#0072B2")) +
geom_errorbar(aes(ymin=(mean)-(se),
ymax=(mean)+(se)),
width=0,position=position_dodge(.4)) +
facet_grid(rows = vars(Site)) +
theme_bw()
plot
# plot each
plot <- Table_by_var %>%
ggplot(aes(x=`Date Time`,
y=mean, # the mean values
group=Site)) + # call the new mean
geom_line(aes(group = factor(Site), # lines for site
linetype = Site),
size = 0.2,
position=position_dodge(.4)) +
# scale_linetype_manual(values=c("solid", "dashed")) +
geom_point(aes(shape=Site,
fill=Site)) +
scale_shape_manual(values=c(21, 22, 24, 25)) +
scale_fill_manual(values=c("#CC79A7", "#D55E00", "#009E73", "#0072B2")) +
geom_errorbar(aes(ymin=(mean)-(se),
ymax=(mean)+(se)),
width=0,position=position_dodge(.4)) +
facet_grid(rows = vars(Site)) +
ggtitle(vars[1,]) +
theme_bw()
plot
path_out
path_out = 'C:/Users/samjg/Documents/Github_repositories/EAD-ASEB_EPA_LISS_Disease_Surveillance/Sonde_Data/output'
path_out
vars[1,]
gsub(" ", "_", vars[1,])
vars <- as.data.frame(
list(
as.character(
unique(
Master_Table_LONG_means$variable)))) %>%
dplyr::rename(dat = 1)
for(i in 1:nrow(vars)) {
# filter table for each variable
Table_by_var <- Master_Table_LONG_means %>%
dplyr::filter(variable %in% vars[i,])
# plot each
plot <- Table_by_var %>%
ggplot(aes(x=`Date Time`,
y=mean, # the mean values
group=Site)) + # call the new mean
geom_line(aes(group = factor(Site), # lines for site
linetype = Site),
size = 0.2,
position=position_dodge(.4)) +
# scale_linetype_manual(values=c("solid", "dashed")) +
geom_point(aes(shape=Site,
fill=Site)) +
scale_shape_manual(values=c(21, 22, 24, 25)) +
scale_fill_manual(values=c("#CC79A7", "#D55E00", "#009E73", "#0072B2")) +
geom_errorbar(aes(ymin=(mean)-(se),
ymax=(mean)+(se)),
width=0,position=position_dodge(.4)) +
facet_grid(rows = vars(Site)) +
ggtitle(vars[i,]) +
theme_bw()
# print plots and name them as the var
pdf(paste0(path_out,"/raw_plots/",gsub(" ", "_", vars[1,]),".pdf"), height = 12, width = 8)
print(plot)
dev.off()
} # close the loop
for(i in 1:nrow(vars)) {
# filter table for each variable
Table_by_var <- Master_Table_LONG_means %>%
dplyr::filter(variable %in% vars[i,])
# plot each
plot <- Table_by_var %>%
ggplot(aes(x=`Date Time`,
y=mean, # the mean values
group=Site)) + # call the new mean
geom_line(aes(group = factor(Site), # lines for site
linetype = Site),
size = 0.2,
position=position_dodge(.4)) +
# scale_linetype_manual(values=c("solid", "dashed")) +
geom_point(aes(shape=Site,
fill=Site)) +
scale_shape_manual(values=c(21, 22, 24, 25)) +
scale_fill_manual(values=c("#CC79A7", "#D55E00", "#009E73", "#0072B2")) +
geom_errorbar(aes(ymin=(mean)-(se),
ymax=(mean)+(se)),
width=0,position=position_dodge(.4)) +
facet_grid(rows = vars(Site)) +
ggtitle(vars[i,]) +
theme_bw()
# print plots and name them as the var
pdf(paste0(path_out,"/raw_plots/",gsub(" ", "_", vars[i,]),".pdf"), height = 12, width = 8)
print(plot)
dev.off()
} # close the loop
for(i in 1:nrow(vars)) {
# filter table for each variable
Table_by_var <- Master_Table_LONG_means %>%
dplyr::filter(variable %in% vars[i,])
# plot each
plot <- Table_by_var %>%
ggplot(aes(x=`Date Time`,
y=mean, # the mean values
group=Site)) + # call the new mean
geom_line(aes(group = factor(Site), # lines for site
linetype = Site),
size = 0.2,
position=position_dodge(.4)) +
# scale_linetype_manual(values=c("solid", "dashed")) +
geom_point(aes(shape=Site,
fill=Site)) +
scale_shape_manual(values=c(21, 22, 24, 25)) +
scale_fill_manual(values=c("#CC79A7", "#D55E00", "#009E73", "#0072B2")) +
geom_errorbar(aes(ymin=(mean)-(se),
ymax=(mean)+(se)),
width=0,position=position_dodge(.4)) +
facet_grid(rows = vars(Site)) +
ggtitle(vars[i,]) +
theme_bw()
# print plots and name them as the var
pdf(paste0(path_out,"/raw_plots/",gsub(" ", "_", vars[i,]),".pdf"), height = 18, width = 8)
print(plot)
dev.off()
} # close the loop
for(i in 1:nrow(vars)) {
# filter table for each variable
Table_by_var <- Master_Table_LONG_means %>%
dplyr::filter(variable %in% vars[i,])
# plot each
plot <- Table_by_var %>%
ggplot(aes(x=`Date Time`,
y=mean, # the mean values
group=Site)) + # call the new mean
geom_line(aes(group = factor(Site), # lines for site
linetype = Site),
size = 0.2,
position=position_dodge(.4)) +
# scale_linetype_manual(values=c("solid", "dashed")) +
geom_point(aes(shape=Site,
fill=Site)) +
scale_shape_manual(values=c(21, 22, 24, 25)) +
scale_fill_manual(values=c("#CC79A7", "#D55E00", "#009E73", "#0072B2")) +
geom_errorbar(aes(ymin=(mean)-(se),
ymax=(mean)+(se)),
width=0,position=position_dodge(.4)) +
facet_grid(rows = vars(Site)) +
ggtitle(vars[i,]) +
theme_bw()
# print plots and name them as the var
pdf(paste0(path_out,"/raw_plots/",gsub(" ", "_", vars[i,]),".pdf"), height = 12, width = 15)
print(plot)
dev.off()
} # close the loop
# plot each
plot <- Table_by_var %>%
ggplot(aes(x=`Date Time`,
y=mean, # the mean values
group=Site)) + # call the new mean
geom_line(aes(group = factor(Site), # lines for site
linetype = Site),
size = 0.2,
position=position_dodge(.4)) +
# scale_linetype_manual(values=c("solid", "dashed")) +
geom_point(aes(shape=Site,
fill=Site)) +
scale_shape_manual(values=c(21, 22, 24, 25)) +
scale_fill_manual(values=c("#CC79A7", "#D55E00", "#009E73", "#0072B2")) +
geom_errorbar(aes(ymin=(mean)-(se),
ymax=(mean)+(se)),
width=0,position=position_dodge(.4)) +
facet_grid(rows = vars(Site), scales = "free_y") +
ggtitle(vars[i,]) +
theme_bw()
plot
for(i in 1:nrow(vars)) {
# filter table for each variable
Table_by_var <- Master_Table_LONG_means %>%
dplyr::filter(variable %in% vars[i,])
# plot each
plot <- Table_by_var %>%
ggplot(aes(x=`Date Time`,
y=mean, # the mean values
group=Site)) + # call the new mean
geom_line(aes(group = factor(Site), # lines for site
linetype = Site),
size = 0.2,
position=position_dodge(.4)) +
# scale_linetype_manual(values=c("solid", "dashed")) +
geom_point(aes(shape=Site,
fill=Site)) +
scale_shape_manual(values=c(21, 22, 24, 25)) +
scale_fill_manual(values=c("#CC79A7", "#D55E00", "#009E73", "#0072B2")) +
geom_errorbar(aes(ymin=(mean)-(se),
ymax=(mean)+(se)),
width=0,position=position_dodge(.4)) +
facet_grid(rows = vars(Site), scales = "free_y") +
ggtitle(vars[i,]) +
theme_bw()
# print plots and name them as the var
pdf(paste0(path_out,"/raw_plots/",gsub(" ", "_", vars[i,]),".pdf"), height = 12, width = 15)
print(plot)
dev.off()
} # close the loop
vars
# an example
Table_by_var %>%
dplyr::filter(variable %in% vars[11,])
# an example
Table_by_var %>%
dplyr::filter(variable %in% vars[11,]) %>%
ggplot(aes(x=`Date Time`,
y=mean, # the mean values
group=Site)) + # call the new mean
geom_line(aes(group = factor(Site), # lines for site
linetype = Site),
size = 0.2,
position=position_dodge(.4)) +
# scale_linetype_manual(values=c("solid", "dashed")) +
geom_point(aes(shape=Site,
fill=Site)) +
scale_shape_manual(values=c(21, 22, 24, 25)) +
scale_fill_manual(values=c("#CC79A7", "#D55E00", "#009E73", "#0072B2")) +
geom_errorbar(aes(ymin=(mean)-(se),
ymax=(mean)+(se)),
width=0,position=position_dodge(.4)) +
facet_grid(rows = vars(Site), scales = "free_y") +
ggtitle(vars[11,]) +
theme_bw()
